# üîß –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–û–õ–ù–û–ú–£ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

## ‚ùå –¢–ï–ö–£–©–ò–ï –ü–†–û–ë–õ–ï–ú–´:
1. **–û—à–∏–±–∫–∞ 500 –≤ /flights/** - `MissingGreenlet` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ relationships
2. **–ë–î –ø—É—Å—Ç–∞** - –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏
3. **–û–∫–Ω–æ –≤—Ö–æ–¥–∞ –º–∞–ª–µ–Ω—å–∫–æ–µ** - –Ω–µ –≤–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï –®–ê–ì–ò:

### –®–ê–ì–ò 1-2: –û–ß–ò–°–¢–ö–ê –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–î

```bash
# 1Ô∏è‚É£ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î
rm test.db

# 2Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é —Å –¥–∞–Ω–Ω—ã–º–∏
python init_db_complete.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 16 –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤ + 16 —Ä–µ–π—Å–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã ‚úÖ

---

### –®–ê–ì 3: –§–ò–ö–°–ò–†–û–í–ê–ù–ò–ï SQLAlchemy ASYNC

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –º–æ–¥–µ–ª—è—Ö `departure_airport` –∏ `arrival_airport` –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è async

**–†–µ—à–µ–Ω–∏–µ:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ** `app/models/flight.py`
2. **–ó–∞–º–µ–Ω–∏—Ç–µ** —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ –∫–æ–¥ –∏–∑ `app/models/flight_fixed.py`
3. **–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ `lazy="selectin"`** –∫ –æ–±–æ–∏–º relationships:

```python
departure_airport = relationship(
    "AirportModel",
    foreign_keys=[departure_airport_id],
    back_populates="departing_flights",
    lazy="selectin"  # ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û!
)

arrival_airport = relationship(
    "AirportModel",
    foreign_keys=[arrival_airport_id],
    back_populates="arriving_flights",
    lazy="selectin"  # ‚Üê –î–û–ë–ê–í–ò–¢–¨ –ò –≠–¢–û!
)
```

---

### –®–ê–ì 4: –ü–ï–†–ï–ó–ê–ü–£–°–ö

```bash
# –ó–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
# –ü–æ—Ç–æ–º:

python main.py
```

---

## üéØ–ß–¢–û –ü–†–û–ò–ó–û–ô–î–Å–¢:

‚úÖ –ë–î –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è 16 –∞—ç—Ä–æ–ø–æ—Ä—Ç–∞–º–∏:
- MOW, SPB, KZN, SVX, YKA, LED, NOV, VVO, OVB, UUS, TOE, PEE, TJM, IGT, ULY, CHI

‚úÖ –ë–î –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è 16 —Ä–µ–π—Å–∞–º–∏:
- SU-001, SU-002, U6-100, UT-50, S7-500, SU-003, FV-201, A4-400, R2-102, FP-55, N1-555, V1-888, E3-200, G5-777, T4-999, L7-333

‚úÖ –í–∫–ª–∞–¥–∫–∞ "–†–ï–ô–°–´" –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ 16 —Ä–µ–π—Å–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
‚úÖ –í–∫–ª–∞–¥–∫–∞ "–ê–≠–†–û–ü–û–†–¢–´" –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ 16 –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤
‚úÖ –û–∫–Ω–æ –≤—Ö–æ–¥–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ü–ö, –ø–ª–∞–Ω—à–µ—Ç–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

---

## üìã–ß–¢–û –ë–´–õ–û –ó–ê–ì–†–£–ñ–ï–ù–û –ù–ê GITHUB:

1. ‚úÖ `init_db_complete.py` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î —Å 32 –ø—Ä–∏–º–µ—Ä–∞–º–∏
2. ‚úÖ `static/styles.css` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π CSS (–ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞)
3. ‚úÖ `app/models/flight_fixed.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Å lazy="selectin"

---

## üöÄ–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô:

```
1. rm test.db
   ‚Üì
2. python init_db_complete.py
   ‚Üì
3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å app/models/flight.py (–¥–æ–±–∞–≤–∏—Ç—å lazy="selectin")
   ‚Üì
4. python main.py
   ‚Üì
5. http://localhost:8000 ‚úÖ –†–ê–ë–û–¢–ê–ï–¢!
```

---

## ‚ú® –ü–û–°–õ–ï –í–°–ï–ì–û:

- ‚úÖ –í—Ö–æ–¥ –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
- ‚úÖ 16 –∞—ç—Ä–æ–ø–æ—Ä—Ç–æ–≤ –≤ –ë–î
- ‚úÖ 16 —Ä–µ–π—Å–æ–≤ –≤ –ë–î
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 500
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–ì–û–¢–û–í–û!** üéâ
